
object Loops

inherit list
  Harness



Execute task

  @Match 'count to 4', 6, task
    set a to 0
    count 4
      set a + counter
    else
      return false
    return a

  @Match 'count to 1-5', 10, task
    set a to 0
    count 1 to 5
      set a + counter
    else
      return false
    return a

  @Test 'count to 0', task
    count 0
      return false
    else
      return true
    return false

  @Test 'count to 1-1', task
    count 1 to 1
      return false
    else
      return true
    return false

  @Match 'count down 4', 6, task
    set a to 0
    count down 4
      set a + counter
    else
      return false
    return a

  @Match 'count down 4 2', 5, task
    set a to 0
    count down 4 to 2
      set a + counter
    else
      return false
    return a

  @Test 'count down 0', task
    set a to 0
    count down 0
      return false
    else
      return true
    return false

  @Test 'nested count', task
    set total to 0
    count 5
      count counter+1
        count counter+1
          inc total
    return total=35

  set tdata to: a 1, b 2
  set ldata to: 1, 2
  
  @Match 'each it', 3, task
    set a to 0
    each tdata
      set a + it
    return a
    
  @Match 'each as', 3, task
    set a to 0
    each tdata as val
      set a + val
    return a
    
  @Match 'each key', 'ab', task
    set a to ''
    each tdata
      set a + key
    return a
    
  @Match 'each named key', 'ab', task
    set a to ''
    each tdata as v, k
      set a + k
    return a
    
  @Match 'each none', true, task
    each empty
      return false
    else
      return true
    return false
    
  @Match 'each undefined', true, task
    each undefined
      return false
    else
      return true
    return false
    
  @Match 'each number', true, task
    each 2
      return false
    else
      return true
    return false
    
  @Match 'each list it', 3, task
    set a to 0
    each ldata
      set a + it
    return a
    
  @Match 'each list key', '01', task
    set a to ''
    each ldata
      set a + key
    return a
    
      
  @Match 'ply it', 3, task
    set a to 0
    ply ldata
      set a + it
    return a
    
  @Match 'ply as', 3, task
    set a to 0
    ply ldata as val
      set a + val
    return a
    
  @Match 'ply key', '01', task
    set a to ''
    ply ldata
      set a + key
    return a
    
  @Match 'ply named key', '01', task
    set a to ''
    ply ldata as v, k
      set a + k
    return a
    
  @Match 'ply none', true, task
    ply empty
      return false
    else
      return true
    return false
    
  @Match 'ply undefined', true, task
    ply undefined
      return false
    else
      return true
    return false
    
  @Match 'ply number', true, task
    ply 2
      return false
    else
      return true
    return false
    
  @Match 'ply traits', true, task
    ply tdata
      return false
    else
      return true
    return false
    

    
  @Test 'count up break', task
    count 10
      break
      return false
    return true
    
  @Test 'count up continue', task
    count 10
      continue
      return false
    return true
    
  @Test 'count down break', task
    count down 10
      break
      return false
    return true
    
  @Test 'count down continue', task
    count down 10
      continue
      return false
    return true
    
  @Test 'ply break', task
    ply: 1,2,3,4
      break
      return false
    return true
    
  @Test 'ply continue', task
    ply: 1,2,3,4
      continue
      return false
    return true
    
  @Test 'each break', task
    each: 1,2,3,4
      break
      return false
    return true
    
  @Test 'each continue', task
    each: 1,2,3,4
      continue
      return false
    return true
    
  @Test 'iterate break', task
    iterate (:1,2,3,4) iterate
      break
      return false
    return true
    
  @Test 'iterate continue', task
    iterate (:1,2,3,4) iterate
      continue
      return false
    return true
    
  @Test 'while break', task
    while 1
      break
      return false
    return true
    
  @Test 'while continue', task
    set a to 1
    while a
      dec a
      continue
      return false
    return true
    
  @Test 'iterate map', task
    set a to new ~Map
    a.set 'a',1
    a.set 'b',2
    a.set 'c',3
    set b to: '',''
    iterate a
      set b.0 + .0
      set b.1 + .1
    return b.1='123' and b.0='abc'
      
  @Test 'until', task
    set a to 0
    until a
      set a to 1
    return true
    
  @Test 'do while', task
    do while false
      return true
    return false
    
  @Test 'do until', task
    do until true
      return true
    return false
    
  @Test 'while as', task
    set a to false
    while true
      set a to it
      break
    return a
    
    
