
object Operators

inherit list
  Harness

Execute task

  @Match '+', 5, task
    return 3 + 2

  @Match '-', 1, task
    return 4 - 3

  @Match 'binary or', 7, task
    return 5 orb 3 

  @Match 'binary and', 1, task
    return 5 andb 3 

  @Match 'binary xor', 6, task
    return 5 xorb 3 

  @Match '*', 6, task
    return 2 * 3

  @Match '/', 3, task
    return 6 / 2

  @Match '%', 1, task
    return 6 % 5

  @Match '**', 9, task
    return 3 ** 2
    
  @Match 'unary -', 3, task
    return 1 - -2
    
  @Match 'unary binary not', -8, task
    return notb 7

  @Match 'unary not', false, task
    return not true
    
  @Match 'number valid', 10, task
    return number '10'

  @Match 'number invalid', 0, task
    return number 'frog'
    
  @Test 'exists', task
    return exists false
    
  @Test 'and', task
    return 1 and 1

  @Test 'or', task
    return 0 or 1
    
  @Test 'xor', task
    return not ((1 xor 1) or (0 xor 0)) and (0 xor 1) and (1 xor 0) 

  @Test 'nand', task
    return (0 nand 0) and (0 nand 1) and (1 nand 0) and not (1 nand 1) 

  @Test '=', task
    return 7 = 7

  @Test '>=', task
    return (1 >= 0) and (1 >= 1) 

  @Test '>', task
    return (1 > 0) and not (1 > 1)

  @Test '<', task
    return (0 < 1) and not (1 < 1) 

  @Test '<=', task
    return (0 <= 1) and (1 <= 1)

  @Test '!=', task
    return (1 != 0) 

  @Match '?<', 2, task
    return 2 ?< 3

  @Match '?>', 3, task
    return 2 ?> 3

  @Test 'is undef', task
    return undefined is undefined

  @Test 'is obj', task
    set a to: d 1, e 2
    set b to a
    return (a is b) and (b.d=1) and (b.e=2)
    
  @Test 'isnt', task
    return 0 isnt false
  
  @Test 'copy', task
    set a to: d 1, e 2
    set b to a
    set c to copy a
    return (a is b) and (a isnt c) and (c.d=1) and (c.e=2)
    
  @Test 'keys comp undefined', task
    set a to undefined keys
    return ~Array.isArray(a) and (a.length = 0)
  
  @Test 'keys comp value', task 
    set a to 1 keys
    return ~Array.isArray(a) and (a.length=0)
  
  @Test 'keys comp list', task 
    set a to: 1, 2; keys
    return ~Array.isArray(a) and (a.length=2) and (a|0=0) and (a|1=1)
    
  @Test 'keys comp traits', task
    set a to: a 1, b 2; keys
    return ~Array.isArray(a) and (a.length=2) and (a|0='a') and (a|1='b')
    
  @Test 'keys unary undefined', task
    set a to keys undefined
    return ~Array.isArray(a) and (a.length = 0)
  
  @Test 'keys unary value', task 
    set a to keys 1
    return ~Array.isArray(a) and (a.length=0)
  
  @Test 'keys unary list', task 
    set a to keys: 1, 2
    return ~Array.isArray(a) and (a.length=2) and (a|0=0) and (a|1=1)
    
  @Test 'keys unary traits', task
    set a to keys: a 1, b 2
    return ~Array.isArray(a) and (a.length=2) and (a|0='a') and (a|1='b')
    
  @Test 'values comp undefined', task
    set a to undefined values
    return ~Array.isArray(a) and (a.length is 0)
    
  @Test 'values comp value', task
    set a to 1 values
    return ~Array.isArray(a) and (a|0=1)
    
  @Test 'values comp list', task
    set a to: 1, 2; values
    return ~Array.isArray(a) and (a.length=2) and (a|0=1) and (a|1=2)
    
  @Test 'values comp traits', task
    set a to: a 1, b 2; values
    return ~Array.isArray(a) and (a.length=2) and (a|0=1) and (a|1=2)
    
  @Test 'values unary undefined', task
    set a to values undefined
    return ~Array.isArray(a) and (a.length is 0)
    
  @Test 'values unary value', task
    set a to values 1
    return ~Array.isArray(a) and (a|0=1)
    
  @Test 'values unary list', task
    set a to values: 1, 2
    return ~Array.isArray(a) and (a.length=2) and (a|0=1) and (a|1=2)
    
  @Test 'values unary traits', task
    set a to values: a 1, b 2
    return ~Array.isArray(a) and (a.length=2) and (a|0=1) and (a|1=2)
    
  @Test 'overlay static', task
    set a to traits a 1, b 2
    set b to a overlay traits b 3, c 4
    return b.a=1 and b.b=3 and b.c=4
    
  @Test 'overlay dynamic', task
    set a to list 1,2,3,4; sow
    set b to a overlay traits 1 'a', 3 'b'; reap
    return b[0]=1 and b[1]='a' and b[2]=3 and b[3]='b'
    
  @Test 'select undefined', task
    set a to traits a 1, b 2, c 3
    set b to a select undefined
    return b.a is undefined and b.b is undefined and b.c is undefined

  @Test 'select value', task
    set a to traits a 1, b 2, c 3
    set b to a select 'b'
    return b.a is undefined and b.b=2 and b.c is undefined

  @Test 'select list', task
    set a to traits a 1, b 2, c 3
    set b to a select list a, c
    return b.a=1 and b.c=3 and b.b is undefined

  @Test 'select traits', task
    set a to traits a 1, b 2, c 3
    set b to a select traits a 1, c 2
    return b.a=1 and b.c=3 and b.b is undefined

  @Match 'via', 3, task
    return 3.141 via ~Math.floor

  @Test 'default unset', task
    return undefined default true

  @Test 'default set', task
    return not (false default true)

  @Test 'initialized unset', task
    set a to undefined
    set b to a initialized true
    return b=true and a=true
    
  @Test 'initialized set', task
    set a to false
    set b to a initialized true
    return b=false and a=false

  @Match 'compare less', -1, task
    return 0 <=> 1
    
  @Match 'compare eq', 0, task
    return 1 <=> 1
    
  @Match 'compare greater', 1, task
    return 2 <=> 1
    
  @Match 'lsh', 2, task
    return 1 << 1
    
  @Match 'rsh', 1, task
    return 2 >> 1
    
  @Match 'rshz', 1073741821, task
    return -9 >>> 2
    
  @Match 'typeof', 'object', task
    return typeof @

  @Match 'isa', 'Operators', task
    return @isa
    